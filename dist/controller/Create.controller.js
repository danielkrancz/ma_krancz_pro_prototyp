sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/m/MessageToast","sap/ui/core/routing/History","sap/m/MessageBox","sap/ui/table/Column","sap/m/Column","sap/m/Label"],(e,t,n,a,l,d,o,i,s)=>{"use strict";return e.extend("at.hb.makrancz.procodeapp.controller.Create",{onInit:function(){this.getOwnerComponent().getRouter().getRoute("Create").attachPatternMatched(this.onPatternMatched,this)},onPatternMatched:function(e){this.createModel=new t({});this.getView().setModel(this.createModel,"createModel");this.uiModel=new t({supportMultiselect:false,supportRanges:false});this.getView().setModel(this.uiModel,"ui")},onSave:function(){let e=this.getView().getModel("createModel").getData();this.getOwnerComponent().getModel().create("/Travel",e,{success:e=>{a.show("Successfully saved.");this.getOwnerComponent().getRouter().navTo("Detail",{TravelID:e.TravelID},true)}})},onNavBack(){const e=l.getInstance();const t=e.getPreviousHash();if(t!==undefined){window.history.go(-1)}else{const e=this.getOwnerComponent().getRouter();e.navTo("RouteMain",{},true)}},onCancel:function(){d.warning("Your entries will be lost when you leave this page.",{actions:["Leave Page","Cancel"],emphasizedAction:"Leave Page",initialFocus:"Cancel",onClose:e=>{if(e==="Leave Page"){this.onNavBack()}}})},onAgencyValueHelpRequested:function(e){this._oInput=e.getSource();this.sVHPath="/AgencyID";n.load({name:"at.hb.makrancz.procodeapp.view.fragment.ValueHelpDialogAgency",controller:this}).then(function(e){var t=e.getFilterBar();this._oVHD=e;this.getView().addDependent(e);e.setRangeKeyFields([{label:"Agency",key:"AgencyID",type:"string"}]);t.setFilterBarExpanded(false);e.getTableAsync().then(function(t){if(t.bindRows){t.bindAggregation("rows",{path:"/TravelAgency",events:{dataReceived:function(){e.update()}}});let n=new o({label:new s({text:"Agency ID"}),template:new Text({wrapping:false,text:"{AgencyID}"})});n.data({fieldName:"AgencyID"});let a=new o({label:new s({text:"Agency Name"}),template:new Text({wrapping:false,text:"{AgencyName}"})});a.data({fieldName:"AgencyName"});let l=new o({label:new s({text:"Street"}),template:new Text({wrapping:false,text:"{Street}"})});l.data({fieldName:"Street"});let d=new o({label:new s({text:"Postal Code"}),template:new Text({wrapping:false,text:"{PostalCode}"})});d.data({fieldName:"PostalCode"});let i=new o({label:new s({text:"City"}),template:new Text({wrapping:false,text:"{City}"})});i.data({fieldName:"City"});let r=new o({label:new s({text:"Country Code"}),template:new Text({wrapping:false,text:"{CountryCode}"})});r.data({fieldName:"CountryCode"});let u=new o({label:new s({text:"Phone"}),template:new Text({wrapping:false,text:"{PhoneNumber}"})});u.data({fieldName:"PhoneNumber"});let w=new o({label:new s({text:"Email"}),template:new Text({wrapping:false,text:"{EMailAddress}"})});w.data({fieldName:"EMailAddress"});let m=new o({label:new s({text:"Website"}),template:new Text({wrapping:false,text:"{WebAddress}"})});m.data({fieldName:"WebAddress"});t.addColumn(n);t.addColumn(a);t.addColumn(l);t.addColumn(d);t.addColumn(r);t.addColumn(u);t.addColumn(w);t.addColumn(m)}if(t.bindItems){t.bindAggregation("items",{path:"/TravelAgency",template:new ColumnListItem({cells:[new s({text:"{AgencyID}"}),new s({text:"{AgencyName}"}),new s({text:"{Street}"}),new s({text:"{PostalCode}"}),new s({text:"{City}"}),new s({text:"{CountryCode}"}),new s({text:"{PhoneNumber}"}),new s({text:"{EMailAddress}"}),new s({text:"{WebAddress}"})]}),events:{dataReceived:function(){e.update()}}});t.addColumn(new i({header:new s({text:"Agency ID"})}));t.addColumn(new i({header:new s({text:"Agency Name"})}));t.addColumn(new i({header:new s({text:"Steet"})}));t.addColumn(new i({header:new s({text:"Postal Code"})}));t.addColumn(new i({header:new s({text:"City"})}));t.addColumn(new i({header:new s({text:"Country"})}));t.addColumn(new i({header:new s({text:"Phone"})}));t.addColumn(new i({header:new s({text:"Email"})}));t.addColumn(new i({header:new s({text:"Website"})}))}e.update()}.bind(this));e.open()}.bind(this))},onCustomerValueHelpRequested:function(e){this._oInput=e.getSource();this.sVHPath="/CustomerID";n.load({name:"at.hb.makrancz.procodeapp.view.fragment.ValueHelpDialogCustomer",controller:this}).then(function(e){var t=e.getFilterBar();this._oVHD=e;this.getView().addDependent(e);e.setRangeKeyFields([{label:"Customer",key:"CustomerID",type:"string"}]);t.setFilterBarExpanded(false);e.getTableAsync().then(function(t){if(t.bindRows){t.bindAggregation("rows",{path:"/Passenger",events:{dataReceived:function(){e.update()}}});let n=new o({label:new s({text:"Customer ID"}),template:new Text({wrapping:false,text:"{CustomerID}"})});n.data({fieldName:"CustomerID"});let a=new o({label:new s({text:"First Name"}),template:new Text({wrapping:false,text:"{FirstName}"})});a.data({fieldName:"FirstName"});let l=new o({label:new s({text:"Last Name"}),template:new Text({wrapping:false,text:"{LastName}"})});l.data({fieldName:"LastName"});let d=new o({label:new s({text:"Title"}),template:new Text({wrapping:false,text:"{Title}"})});d.data({fieldName:"Title"});let i=new o({label:new s({text:"Street"}),template:new Text({wrapping:false,text:"{Street}"})});i.data({fieldName:"Street"});t.addColumn(n);t.addColumn(a);t.addColumn(l);t.addColumn(d);t.addColumn(i)}if(t.bindItems){t.bindAggregation("items",{path:"/Passenger",template:new ColumnListItem({cells:[new s({text:"{CustomerID}"}),new s({text:"{FirstName}"}),new s({text:"{LastName}"}),new s({text:"{Title}"}),new s({text:"{Street}"})]}),events:{dataReceived:function(){e.update()}}});t.addColumn(new i({header:new s({text:"Customer ID"})}));t.addColumn(new i({header:new s({text:"First Name"})}));t.addColumn(new i({header:new s({text:"Last Name"})}));t.addColumn(new i({header:new s({text:"Title"})}));t.addColumn(new i({header:new s({text:"Steet"})}))}e.update()}.bind(this));e.open()}.bind(this))},onCurrencyValueHelpRequested:function(e){this._oInput=e.getSource();this.sVHPath="/CurrencyCode";n.load({name:"at.hb.makrancz.procodeapp.view.fragment.ValueHelpDialogCurrency",controller:this}).then(function(e){var t=e.getFilterBar();this._oVHD=e;this.getView().addDependent(e);e.setRangeKeyFields([{label:"Currency Code",key:"CurrencyCode",type:"string"}]);t.setFilterBarExpanded(false);e.getTableAsync().then(function(t){if(t.bindRows){t.bindAggregation("rows",{path:"/Currency",events:{dataReceived:function(){e.update()}}});let n=new o({label:new s({text:"Currency"}),template:new Text({wrapping:false,text:"{Currency}"})});n.data({fieldName:"Currency"});let a=new o({label:new s({text:"Description"}),template:new Text({wrapping:false,text:"{Currency_Text}"})});a.data({fieldName:"Currency_Text"});t.addColumn(n);t.addColumn(a)}if(t.bindItems){t.bindAggregation("items",{path:"/Currency",template:new ColumnListItem({cells:[new s({text:"{Currency}"}),new s({text:"{Currency_Text}"})]}),events:{dataReceived:function(){e.update()}}});t.addColumn(new i({header:new s({text:"Currency"})}));t.addColumn(new i({header:new s({text:"Description"})}))}e.update()}.bind(this));e.open()}.bind(this))},onValueHelpOkPress:function(e){this.getView().getModel("createModel").setProperty(this.sVHPath,e.getParameters().tokens[0].getKey());this._oVHD.close()},onValueHelpCancelPress:function(){this._oVHD.close()},onValueHelpAfterClose:function(){this._oVHD.destroy()}})});
//# sourceMappingURL=Create.controller.js.map