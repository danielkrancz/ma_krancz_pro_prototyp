<mvc:View xmlns:mvc="sap.ui.core.mvc"
		   xmlns="sap.uxap"
		   xmlns:layout="sap.ui.layout"
		   xmlns:core="sap.ui.core"
		   xmlns:svm="sap.ui.comp.smartvariants"
		   xmlns:form="sap.ui.layout.form"
		   xmlns:m="sap.m"
		   xmlns:plugins="sap.m.plugins"
    	   xmlns:columnmenu="sap.m.table.columnmenu"
		   xmlns:dnd="sap.ui.core.dnd"
		   controllerName="at.hb.makrancz.procodeapp.controller.Detail"
		   height="100%">
	<ObjectPageLayout id="ObjectPageLayout"
		showTitleInHeaderContent="true">
		<headerTitle>
			<ObjectPageDynamicHeaderTitle>
				<expandedHeading>
					<m:Title text="{TravelID}" wrapping="true"/>
				</expandedHeading>

				<snappedHeading>
					<m:FlexBox fitContainer="true" alignItems="Center">
						<m:Title text="{TravelID}" wrapping="true" />
					</m:FlexBox>
				</snappedHeading>

				<actions>
					<m:Button text="Edit" type="Emphasized" press="onEdit"/>
					<m:Button type="Transparent" text="Delete" press="onDelete"/>
				</actions>
			</ObjectPageDynamicHeaderTitle>
		</headerTitle>

		<sections>
			<ObjectPageSection titleUppercase="false" title="Travel">
                <subSections>
                    <ObjectPageSubSection id="travelDetailSubSection" titleUppercase="false">
                        <blocks>
                            <form:SimpleForm editable="true" layout="ColumnLayout" columnsM="2" columnsL="3" columnsXL="5">
								<m:Label text="{/#TravelType/TravelID/@sap:label}"/>
								<m:Text text="{TravelID}"/>

								<m:Label text="{/#TravelType/AgencyID/@sap:label}"/>
								<m:Text text="{AgencyName} ({AgencyID})"/>

								<m:Label text="{/#TravelType/CustomerID/@sap:label}"/>
								<m:Text text="{CustomerName} ({CustomerID})"/>

								<m:Label text="{/#TravelType/BeginDate/@sap:label}"/>
								<m:Text text="{ path: 'BeginDate', type: 'sap.ui.model.type.Date'}"/>

								<m:Label text="{/#TravelType/EndDate/@sap:label}"/>
								<m:Text text="{ path: 'EndDate', type: 'sap.ui.model.type.Date'}"/>

								<m:Label text="{/#TravelType/BookingFee/@sap:label}"/>
								<m:Text text="{ path: 'BookingFee', type: 'sap.ui.model.odata.type.Decimal', formatOptions: { scale: 2 } } {CurrencyCode}" />

								<m:Label text="{/#TravelType/TotalPrice/@sap:label}"/>
								<m:Text text="{ path: 'TotalPrice', type: 'sap.ui.model.odata.type.Decimal', formatOptions: { scale: 2 } } {CurrencyCode}" />

								<m:Label text="{/#TravelType/OverallStatus/@sap:label}"/>
								<m:Text text="{OverallStatusText}"/>

								<m:Label text="{/#TravelType/Description/@sap:label}"/>
								<m:Text text="{Description}"/>
							</form:SimpleForm>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
			</ObjectPageSection>
            <ObjectPageSection titleUppercase="false" title="Booking">
                <subSections>
                    <ObjectPageSubSection titleUppercase="false">
                        <blocks>
                            <m:Table id="bookingTable" items="{ path: 'to_Booking', sorter: [ { path: 'BookingID' } ] }" growingScrollToLoad="true" fixedLayout="Strict" growing="true" sticky="ColumnHeaders,HeaderToolbar">
								<m:dependents>
									<plugins:ColumnResizer columnResize="onColumnResize"/>
									<columnmenu:Menu id="menu" beforeOpen="beforeOpenColumnMenu" showTableSettingsButton="true" tableSettingsPressed="openPersoDialog">
										<columnmenu:QuickSort change="onSort">
											<columnmenu:items>
												<columnmenu:QuickSortItem></columnmenu:QuickSortItem>
											</columnmenu:items>
										</columnmenu:QuickSort>
										<columnmenu:QuickGroup change="onGroup">
											<columnmenu:items>
												<columnmenu:QuickGroupItem></columnmenu:QuickGroupItem>
											</columnmenu:items>
										</columnmenu:QuickGroup>
									</columnmenu:Menu>
								</m:dependents>

								<m:dragDropConfig>
									<dnd:DragDropInfo sourceAggregation="columns" targetAggregation="columns" dropPosition="Between" drop="onColumnMove"/>
								</m:dragDropConfig>

								<m:noData>
									<m:IllustratedMessage/>
								</m:noData>
								<m:headerToolbar>
									<m:OverflowToolbar>
										<m:Title text="Bookings"/>
										<m:ToolbarSpacer/>
										<m:SearchField width="15em" change="onSearchChanged"/>
										<m:Button text="Create" press="onCreateBooking"/>
										<m:Button icon="sap-icon://action-settings" press="openPersoDialog"/>
										<m:Button icon="sap-icon://excel-attachment" press="onExport"/>
									</m:OverflowToolbar>
								</m:headerToolbar>
								<m:columns>
									<m:Column id="bookingid" headerMenu="menu" demandPopin="true" importance="High">
										<m:Text text="{/#BookingType/BookingID/@sap:label}"/>
									</m:Column>

									<m:Column id="bookingdate" headerMenu="menu" demandPopin="true" importance="High">
										<m:Text text="{/#BookingType/BookingDate/@sap:label}"/>
									</m:Column>

									<m:Column id="customerid" headerMenu="menu" demandPopin="true" importance="High">
										<m:Text text="{/#BookingType/CustomerID/@sap:label}"/>
									</m:Column>

									<m:Column id="carrierid" headerMenu="menu" demandPopin="true" importance="High">
										<m:Text text="{/#BookingType/CarrierID/@sap:label}"/>
									</m:Column>

									<m:Column id="connectionid" headerMenu="menu" demandPopin="true" importance="High">
										<m:Text text="{/#BookingType/ConnectionID/@sap:label}"/>
									</m:Column>

									<m:Column id="flightdate" headerMenu="menu" demandPopin="true" importance="High">
										<m:Text text="{/#BookingType/FlightDate/@sap:label}"/>
									</m:Column>

									<m:Column id="flightprice" headerMenu="menu" demandPopin="true" importance="High">
										<m:Text text="{/#BookingType/FlightPrice/@sap:label}"/>
									</m:Column>

									<m:Column id="status" headerMenu="menu" demandPopin="true" importance="High">
										<m:Text text="{/#BookingType/BookingStatusText/@sap:label}"/>
									</m:Column>
									
								</m:columns>
								<m:items>
									<m:ColumnListItem type="Navigation" press="onListItemPressed">
										<m:Text text="{BookingID}"/>
										<m:Text text="{ path: 'BookingDate', type: 'sap.ui.model.type.Date'}"/>
										<m:Text text="{CustomerName} ({CustomerID})"/>
										<m:Text text="{CarrierName} ({CarrierID})"/>
										<m:Text text="{ConnectionID}"/>
										<m:Text text="{ path: 'FlightDate', type: 'sap.ui.model.type.Date'}"/>
										<m:Text text="{FlightPrice}"/>
										<m:Text text="{BookingStatusText}"/>
									</m:ColumnListItem>
								</m:items>
							</m:Table>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
			</ObjectPageSection>
		</sections>
	</ObjectPageLayout>
</mvc:View>
